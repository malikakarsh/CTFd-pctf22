const START = new Date(init.start * 1000);
const END = new Date(init.end * 1000);

const disp_phase = document.getElementById("countdown-phase");
const countdown_disp = document.getElementById("countdown");

const disp = {
    days: countdown_disp.querySelector(".days"),
    hour: countdown_disp.querySelector(".hour"),
    minute: countdown_disp.querySelector(".minute"),
    second: countdown_disp.querySelector(".second"),
}

let countdown_interval_id = null;

const countdown = () => {
    const NOW = new Date();
    let compareTo;

    if (NOW > END) {
        disp_phase.textContent = "Pragyan CTF is over! Thanks for participating!";
        compareTo = null;
        countdown_disp.remove();
        clearInterval(countdown_interval_id);
        return;
    }
    else if (NOW > START) {
        disp_phase.textContent = "Event ends in";
        compareTo = END;
    }
    else {
        disp_phase.textContent = "Event starts in";
        compareTo = START;
    }

    const diff = Math.floor((compareTo - NOW));
    disp.days.textContent = (Math.floor(diff / (1000 * 60 * 60 * 24))).toString().padStart(2, "0");
    disp.hour.textContent = (Math.floor(Math.floor(diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))).toString().padStart(2, "0");
    disp.minute.textContent = (Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60))).toString().padStart(2, "0");
    disp.second.textContent = (Math.floor((diff / 1000) % 60)).toString().padStart(2, "0");
};

countdown();
countdown_interval_id = setInterval(countdown, 1000);